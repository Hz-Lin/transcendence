// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

enum FriendStatus {
	NOT_FRIENDS
	PENDING
	FRIENDS
}

enum ActivityStatus {
	ONLINE
	INGAME
	OFFLINE
}

datasource db {
	provider = "postgresql"
	url      = env("DATABASE_URL")
}

generator client {
	provider = "prisma-client-js"
}

model UserMessage {
	id		Int @id @default(autoincrement())
	name	String
	text	String
}

model User {
	id				Int @id @default(autoincrement())
	createdAt		DateTime @default(now())
	updatedAt		DateTime @updatedAt
	avatar			String?
	name			String @unique
	intraId			Int @unique
	intraName		String @unique
	activityStatus	ActivityStatus @default(ONLINE)
	allOtherUsers	AllOtherUsers[]
}

model AllOtherUsers {
	id				Int @id @default(autoincrement())
	intraId 		Int
	otherIntraId	Int
	user			User @relation(fields: [intraId], references: [intraId])
	blockedStatus	Boolean @default(false)
	friendStatus	FriendStatus @default(NOT_FRIENDS)

    @@unique([intraId, otherIntraId])
}
